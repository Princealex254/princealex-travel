<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Prince Alex Travel Services</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode.js/1.0.0/qrcode.min.js"></script>
    <!-- Supabase CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        /* Use: Defines custom CSS variables for consistent theming. */
        :root {
            --primary-color: #002d6b; /* Use: Main brand color, e.g., for navbar, headings. */
            --accent-color: #c69214; /* Use: Highlight color, e.g., for buttons, hover effects. */
            --light-bg: #f5f7fa; /* Use: Light background color for sections. */
            --text-dark: #1a1a1a; /* Use: Dark text color. */
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            /* Use: Resets default browser margins/paddings and sets box model for consistent sizing. */
        }
        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: var(--light-bg);
            color: var(--text-dark);
            /* Use: Sets global font, background, and text color. */
        }
        .navbar {
            background-color: var(--primary-color);
            padding: 15px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            /* Use: Styles the top navigation bar with a background, padding, and subtle shadow. */
        }
        .navbar-container {
            max-width: 1200px;
            margin: auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            /* Use: Centers and arranges navigation elements horizontally within the navbar. */
        }
        .logo {
            background-color: white;
            padding: 10px 15px;
            border-radius: 12px;
            box-shadow: 0 0 8px rgba(0,0,0,0.2);
            /* Use: Styles the logo container with a white background, rounded corners, and shadow. */
        }
        .logo img {
            height: 80px;
            display: block;
            /* Use: Sizes the logo image within its container. */
        }
        .nav-links {
            display: flex;
            gap: 25px;
            /* Use: Arranges navigation links horizontally with spacing. */
        }
        .nav-links a {
            color: white;
            text-decoration: none;
            font-weight: 600;
            font-size: 16px;
            position: relative;
            /* Use: Styles individual navigation links, setting color, removing underlines, and positioning for hover effect. */
        }
        .nav-links a::after {
            content: '';
            display: block;
            width: 0;
            height: 2px;
            background: var(--accent-color);
            transition: width 0.3s;
            position: absolute;
            bottom: -5px;
            left: 0;
            /* Use: Creates an animated underline that appears on hover. */
        }
        .nav-links a:hover::after {
            width: 100%;
            /* Use: Expands the underline width on hover. */
        }
        .nav-links a:hover {
            color: var(--accent-color);
            /* Use: Changes link color on hover. */
        }

        /* Hamburger Menu Icon */
        .menu-toggle {
            display: none; /* Hidden by default, shown on mobile */
            flex-direction: column;
            justify-content: space-around;
            width: 30px;
            height: 25px;
            cursor: pointer;
            z-index: 10001; /* Above nav links when open */
        }

        .menu-toggle .bar {
            width: 100%;
            height: 3px;
            background-color: white;
            border-radius: 5px;
            transition: all 0.3s ease;
        }

        /* Animation for hamburger to close icon */
        .menu-toggle.open .bar:nth-child(1) {
            transform: translateY(11px) rotate(45deg);
        }
        .menu-toggle.open .bar:nth-child(2) {
            opacity: 0;
        }
        .menu-toggle.open .bar:nth-child(3) {
            transform: translateY(-11px) rotate(-45deg);
        }

        /* Mobile Navigation Overlay */
        /* This class will be applied to the .nav-links element on mobile */
        @media (max-width: 768px) {
            .nav-links { /* Target the .nav-links directly for mobile styles */
                flex-direction: column;
                position: fixed;
                top: 0;
                right: -100%; /* Start off-screen */
                width: 70%; /* Adjust as needed */
                height: 100%;
                background-color: var(--primary-color);
                padding-top: 100px; /* Space for logo/header */
                box-shadow: -2px 0 10px rgba(0,0,0,0.2);
                transition: right 0.3s ease-in-out, opacity 0.3s ease-in-out;
                z-index: 10000;
                opacity: 0; /* Initially hidden */
                pointer-events: none; /* Disable interaction when hidden */
                display: flex; /* Keep it as flex for transitions, but visually hidden */
            }

            .nav-links.open { /* This class will be toggled by JS */
                right: 0; /* Slide in */
                opacity: 1; /* Make visible */
                pointer-events: auto; /* Enable interaction */
            }

            .nav-links a {
                padding: 15px 20px;
                border-bottom: 1px solid rgba(255,255,255,0.1);
                text-align: left;
                width: 100%;
                font-size: 1.1em;
            }
            .nav-links a:last-child {
                border-bottom: none;
            }
        }


        .hero {
            background: linear-gradient(to right, var(--primary-color), #001c44);
            color: white;
            padding: 80px 20px;
            text-align: center;
            /* Use: Styles the hero section with a gradient background, white text, and centering. */
        }
        .hero h1 {
            font-size: 36px;
            margin-bottom: 10px;
            /* Use: Styles the main heading in the hero section. */
        }
        .hero p {
            font-size: 18px;
            opacity: 0.9;
            /* Use: Styles the paragraph text in the hero section. */
        }
        .booking {
            background-color: white;
            padding: 60px 20px;
            text-align: center;
            /* Use: Styles the booking section background and padding. */
        }
        .booking-container {
            max-width: 1000px;
            margin: auto;
            /* Use: Centers the content within the booking section. */
        }
        .booking h2 {
            margin-bottom: 30px;
            color: var(--primary-color);
            /* Use: Styles the heading for the booking form. */
        }
        .booking-form {
            display: flex;
            gap: 15px;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            /* Use: Arranges booking form elements horizontally with wrapping and centering. */
        }
        .booking-form select,
        .booking-form input[type="date"] {
            padding: 12px 10px;
            border: 1px solid #ccc;
            border-radius: 8px;
            font-size: 15px;
            min-width: 180px;
            /* Use: Styles dropdowns and date input fields in the form. */
        }
        .booking-form button[type="submit"] {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 14px 24px;
            font-size: 16px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s;
            /* Use: Styles the search submit button. */
        }
        .booking-form button:hover {
            background-color: #b27e0f;
            /* Use: Darkens the submit button on hover. */
        }
        .results-section {
            max-width: 1000px;
            margin: 40px auto;
            padding: 20px;
            display: none; /* Initially hidden, controlled by JS */
            /* Use: Styles the section where search results will be displayed, initially hidden. */
        }
        .results-section.active {
            display: block;
            /* Use: Makes the results section visible when the 'active' class is added by JavaScript. */
        }
        .results-section h2 {
            margin-bottom: 30px;
            color: #002d6b;
            text-align: center; /* Center the results heading */
            /* Use: Styles the heading for the search results. */
        }
        .result-card {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap; /* Allow wrapping on smaller screens */
            /* Use: Styles individual bus result cards with background, shadow, and flexible layout. */
        }
        .result-card img {
            width: 150px;
            height: 100px;
            border-radius: 8px;
            object-fit: cover;
            flex-shrink: 0; /* Prevent image from shrinking */
            /* Use: Styles the bus image within a result card. */
        }
        .result-details {
            flex: 1;
            min-width: 200px; /* Ensure details don't get too small */
            /* Use: Styles the container for bus details within a result card. */
        }
        .result-details h4 {
            margin: 0 0 10px;
            color: #002d6b;
            /* Use: Styles the route heading in result details. */
        }
        .result-details p {
            margin: 5px 0;
            font-size: 0.95em;
            /* Use: Styles paragraph text (departure, price, seats) in result details. */
        }
        .book-btn {
            background-color: var(--accent-color);
            color: white;
            padding: 10px 18px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s ease;
            margin-left: auto; /* Push button to the right */
            flex-shrink: 0; /* Prevent button from shrinking */
            /* Use: Styles the "Book Now" button in result cards. */
        }
        .book-btn:hover {
            background-color: #b27e0f;
            /* Use: Darkens the "Book Now" button on hover. */
        }
        .gallery {
            padding: 60px 20px;
            background-color: white;
            text-align: center;
            /* Use: Styles the gallery section background and padding. */
        }
        .gallery h2 {
            color: var(--primary-color);
            margin-bottom: 30px;
            font-size: 28px;
            /* Use: Styles the heading for the image gallery. */
        }
        .image-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            max-width: 1000px;
            margin: 0 auto;
            /* Use: Creates a responsive grid layout for gallery images. */
        }
        .image-grid img {
            width: 100%;
            height: auto;
            border-radius: 12px;
            object-fit: cover;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
            /* Use: Styles individual gallery images with rounded corners, shadow, and zoom effect on hover. */
        }
        .image-grid img:hover {
            transform: scale(1.03);
            /* Use: Slightly scales up the image on hover. */
        }
        .footer {
            background-color: var(--primary-color);
            color: white;
            padding: 20px;
            text-align: center;
            font-size: 14px;
            /* Use: Styles the footer background, text color, padding, and font size. */
        }
        .footer-content {
            max-width: 1000px;
            margin: auto;
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            gap: 20px;
            text-align: left;
            /* Use: Arranges footer sections horizontally with wrapping and spacing. */
        }
        .footer-section {
            flex: 1;
            min-width: 200px;
            /* Use: Styles individual sections within the footer. */
        }
        .footer-section h4 {
            color: var(--accent-color);
            margin-bottom: 10px;
            /* Use: Styles headings within footer sections. */
        }
        .footer-section a,
        .footer-section p {
            display: block;
            color: white;
            margin: 4px 0;
            text-decoration: none;
            /* Use: Styles links and paragraphs within footer sections. */
        }
        .footer-section a:hover {
            text-decoration: underline;
            /* Use: Adds underline to footer links on hover. */
        }
        .footer-bottom {
            margin-top: 20px;
            text-align: center;
            font-size: 13px;
            opacity: 0.8;
            /* Use: Styles the copyright text at the bottom of the footer. */
        }

        /* --- Seat Selection Modal Styling --- */
        #seatModal, #loginChoiceModal { /* Apply same base styles to both modals */
            display: none; /* Initially hidden, controlled by JS */
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7); /* Darker overlay */
            z-index: 9999;
            justify-content: center; /* Use flexbox for centering when visible */
            align-items: center;
            padding: 20px; /* Add some padding for smaller screens */
            box-sizing: border-box; /* Include padding in element's total width and height */
            /* Use: Styles the modal overlay for seat selection, making it full screen and centered. */
        }

        #seatModal > div, #loginChoiceModal > div { /* Apply same inner modal styles */
            background:#fff;
            max-width:700px; /* Slightly wider for 32 seats */
            width: 100%; /* Ensure it takes available width */
            padding:30px;
            border-radius:12px;
            position:relative;
            box-shadow: 0 8px 16px rgba(0,0,0,0.25);
            max-height: 90vh; /* Limit height for scrollability */
            overflow-y: auto; /* Enable scrolling if content overflows */
            text-align: center; /* Center text in choice modal */
            /* Use: Styles the modal content box (white background, rounded corners, shadow, scrollable). */
        }

        #seatModal h3, #loginChoiceModal h3 {
            margin-bottom:20px;
            color: var(--primary-color); /* Using your primary color */
            text-align: center;
            font-size: 1.8em;
            /* Use: Styles the heading inside the seat selection modal. */
        }

        #seatGrid {
            display:grid;
            /* grid-template-columns will be set by JS dynamically */
            gap:12px; /* Default gap */
            margin-bottom:25px;
            justify-items: center; /* Center seat icons within their grid cells */
            padding: 10px;
            border: 1px dashed #ccc;
            border-radius: 8px;
            background-color: #fdfdfd;
            /* Use: Creates a grid layout for displaying bus seats. */
        }

        .seat-container {
            position: relative;
            width: 60px; /* Adjust size of seat container */
            height: 60px; /* Adjust size of seat container */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border-radius: 8px;
            transition: transform 0.2s ease, background-color 0.2s ease;
            /* Use: Styles individual seat containers, making them clickable and setting initial appearance. */
        }

        .seat-container .seat-icon {
            font-size: 3em; /* Large seat icon */
            color: #7f8c8d; /* Default grey color for available seats */
            transition: color 0.2s ease;
            /* Use: Styles the Font Awesome chair icon within a seat. */
        }

        .seat-container .seat-number {
            font-size: 0.75em;
            font-weight: bold;
            color: #555;
            margin-top: 5px;
            /* Use: Styles the seat number label. */
        }

        /* Styles for Selected Seat */
        .seat-container.selected .seat-icon {
            color: var(--accent-color); /* Using your accent color for selected */
            /* Use: Changes seat icon color to accent color when selected. */
        }
        .seat-container.selected .seat-number {
            color: var(--accent-color);
            /* Use: Changes seat number color to accent color when selected. */
        }
        .seat-container.selected {
            background-color: #fcefdc; /* Light accent background */
            transform: scale(1.05);
            /* Use: Adds a light background and slight scale effect to selected seats. */
        }

        /* Styles for Booked Seat */
        .seat-container.booked {
            cursor: not-allowed;
            /* Use: Changes cursor for booked seats to indicate they are not clickable. */
        }
        .seat-container.booked .seat-icon {
            color: #c0392b; /* Red for booked */
            /* Use: Changes seat icon color to red for booked seats. */
        }
        .seat-container.booked .seat-number {
            color: #c0392b;
            /* Use: Changes seat number color to red for booked seats. */
        }
        .seat-container.booked::after {
            content: 'X'; /* Add an 'X' for booked seats */
            position: absolute;
            font-size: 2.5em;
            color: rgba(255, 255, 255, 0.7);
            text-shadow: 0 0 5px rgba(0,0,0,0.5);
            background-color: rgba(0,0,0,0.3); /* Dark overlay */
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 8px;
            top: 0; /* Position correctly over the seat */
            left: 0; /* Position correctly over the seat */
            /* Use: Adds a semi-transparent 'X' overlay to visually mark booked seats. */
        }

        /* Input Fields in Modal */
        #seatModal input[type="text"],
        #seatModal input[type="tel"],
        #seatModal input[type="email"],
        #seatModal select { /* Added select for gender */
            padding:12px 15px;
            width:100%;
            margin-bottom:15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-sizing: border-box; /* Crucial for width to include padding and border */
            font-size: 1em;
            /* Use: Styles input fields and dropdowns within the seat selection modal. */
        }

        /* Modal Buttons */
        #seatModal button, #loginChoiceModal button {
            padding:12px 25px;
            border:none;
            border-radius:8px;
            cursor:pointer;
            font-size: 1.05em;
            font-weight: bold;
            transition: background-color 0.3s ease, transform 0.1s ease;
            margin: 0 10px; /* Add margin between buttons */
            /* Use: Base styles for buttons within the seat selection modal. */
        }

        #seatModal button:active, #loginChoiceModal button:active {
            transform: translateY(1px); /* Slight press effect */
            /* Use: Adds a subtle press effect when modal buttons are clicked. */
        }

        #seatModal button[onclick="confirmBooking()"],
        #loginChoiceModal button[onclick="proceedAsGuest()"] {
            background: var(--accent-color); /* Use accent color for proceed */
            color:white;
            /* Use: Styles the "Proceed to Pay" button with the accent color. */
        }

        #seatModal button[onclick="confirmBooking()"]:hover,
        #loginChoiceModal button[onclick="proceedAsGuest()"]:hover {
            background-color: #b27e0f; /* Darker accent */
            /* Use: Darkens "Proceed to Pay" button on hover. */
        }

        #seatModal button[onclick="closeModal()"],
        #loginChoiceModal button[onclick="redirectToLogin()"] {
            background:#ccc; /* Grey for cancel/login */
            color: var(--text-dark); /* Dark text on grey */
            /* Use: Styles the "Cancel" button. */
        }

        #seatModal button[onclick="closeModal()"]:hover,
        #loginChoiceModal button[onclick="redirectToLogin()"]:hover {
            background-color: #bbb;
            /* Use: Darkens "Cancel" button on hover. */
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .navbar-container {
                flex-direction: row; /* Keep logo and hamburger on one row */
                justify-content: space-between;
                align-items: center;
            }
            .nav-links {
                /* Changed to explicitly set initial state for mobile */
                flex-direction: column;
                position: fixed;
                top: 0;
                right: -100%; /* Start off-screen */
                width: 70%; /* Adjust as needed */
                height: 100%;
                background-color: var(--primary-color);
                padding-top: 100px; /* Space for logo/header */
                box-shadow: -2px 0 10px rgba(0,0,0,0.2);
                transition: right 0.3s ease-in-out, opacity 0.3s ease-in-out;
                z-index: 10000;
                opacity: 0; /* Initially hidden */
                pointer-events: none; /* Disable interaction when hidden */
                display: flex; /* Keep it as flex for transitions, but visually hidden */
            }

            .nav-links.open { /* This class will be toggled by JS */
                right: 0; /* Slide in */
                opacity: 1; /* Make visible */
                pointer-events: auto; /* Enable interaction */
            }

            .menu-toggle {
                display: flex; /* Show hamburger icon */
            }
            /* Use: Adjusts navbar layout for tablets and smaller screens. */
            .hero {
                padding: 40px 15px; /* Smaller padding */
            }
            .hero h1 {
                font-size: 28px; /* Smaller font size */
            }
            .hero p {
                font-size: 16px; /* Smaller font size */
            }
            /* Use: Adjusts hero section padding and heading size for smaller screens. */
            .booking {
                padding: 40px 15px;
            }
            .booking h2 {
                font-size: 24px;
            }
            .booking-form {
                flex-direction: column;
                align-items: stretch;
            }
            .booking-form select,
            .booking-form input[type="date"],
            .booking-form button[type="submit"] {
                min-width: unset;
                width: 100%;
            }
            /* Use: Makes booking form elements stack vertically on smaller screens. */
            .results-section {
                padding: 15px;
            }
            .results-section h2 {
                font-size: 22px;
            }
            .result-card {
                flex-direction: column;
                align-items: flex-start;
                padding: 15px;
                gap: 10px;
            }
            .result-card img {
                width: 100%; /* Full width image */
                height: 150px; /* Fixed height for consistency */
            }
            .result-details {
                min-width: unset;
                width: 100%;
            }
            .book-btn {
                margin-left: unset;
                margin-top: 15px;
                width: 100%;
            }
            /* Use: Adjusts "Book Now" button positioning and width for smaller screens. */
            .gallery {
                padding: 40px 15px;
            }
            .gallery h2 {
                font-size: 24px;
            }
            .image-grid {
                grid-template-columns: 1fr; /* Single column for images */
            }
            /* Use: Changes seat grid to 3 columns on smaller screens. */
            .seat-container {
                width: 50px;
                height: 50px;
            }
            .seat-container .seat-icon {
                font-size: 2.5em;
            }
            /* Use: Adjusts seat size and icon size for smaller screens. */
            #seatModal > div, #loginChoiceModal > div {
                margin: 20px; /* More margin on smaller screens */
                padding: 20px;
            }
            #seatModal input, #seatModal select { /* General rule for modal inputs */
                padding: 10px;
            }
            #seatModal button, #loginChoiceModal button {
                padding: 10px 20px;
                font-size: 0.95em;
            }
            /* Use: Adjusts modal padding, input/button sizes for smaller screens. */
            .footer-content {
                flex-direction: column;
                text-align: center;
            }
            .footer-section {
                min-width: unset;
            }
            .footer-section h4 {
                text-align: center;
            }
            .footer-section a,
            .footer-section p {
                display: block; /* Stack links/text vertically in footer sections */
                margin: 4px 0;
            }
            /* Use: Adjusts footer layout for smaller screens to stack sections. */
        }

        @media (max-width: 480px) {
            #seatGrid {
                grid-template-columns: repeat(2, 1fr); /* 2 columns on very small screens */
            }
            /* Use: Changes seat grid to 2 columns on very small screens. */
            .seat-container {
                width: 45px;
                height: 45px;
            }
            .seat-container .seat-icon {
                font-size: 2em;
            }
            /* Use: Further reduces seat and icon size for very small screens. */
            .book-now-btn, #seatModal button, #loginChoiceModal button {
                font-size: 0.9em;
                padding: 10px 15px;
            }
            /* Use: Adjusts button font size and padding for very small screens. */
        }

        /* AI Assistant Button */
        #aiAssistantButton {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background-color: var(--primary-color);
            color: rgb(245, 209, 4);
            width: 70px;
            height: 70px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.8em;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
            z-index: 10000; /* Ensure it's above everything */
            transition: background-color 0.3s ease, transform 0.3s ease;
            /* Use: Darkens and slightly scales the AI button on hover. */
        }

        #aiAssistantButton:hover {
            background-color: #001c44; /* Darker primary */
            transform: scale(1.05);
            /* Use: Darkens and slightly scales the AI button on hover. */
        }

        /* AI Assistant Chat Interface */
        #aiAssistantChat {
            position: fixed;
            bottom: 100px; /* Position above the button */
            right: 30px;
            width: 320px;
            height: 400px;
            background-color: #fff;
            border-radius: 12px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            z-index: 9999;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            transition: all 0.3s ease-in-out;
            transform: translateY(20px) scale(0.9);
            opacity: 0;
            pointer-events: none; /* Disable interaction when hidden */
            /* Use: Styles the chat window (position, size, appearance, initial hidden state). */
        }

        #aiAssistantChat.chat-visible {
            transform: translateY(0) scale(1);
            opacity: 1;
            pointer-events: auto; /* Enable interaction when visible */
            /* Use: Applies transformation and opacity to make chat window visible with animation. */
        }

        .chat-hidden {
            display: none; /* For initial state and complete hiding */
            /* Use: Hides the chat window completely when not in use. */
        }

        .chat-header {
            background-color: var(--primary-color);
            color: white;
            padding: 15px;
            border-top-left-radius: 12px;
            border-top-right-radius: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            /* Use: Styles the header of the chat window (background, text, layout). */
        }

        .chat-header h3 {
            margin: 0;
            font-size: 1.2em;
            /* Use: Styles the title in the chat header. */
        }

        .chat-close-btn {
            background: none;
            border: none;
            color: white;
            font-size: 1.5em;
            cursor: pointer;
            padding: 5px;
            line-height: 1;
            /* Use: Styles the close button in the chat header. */
        }

        .chat-close-btn:hover {
            color: var(--accent-color);
            /* Use: Changes close button color on hover. */
        }

        .chat-body {
            flex-grow: 1;
            padding: 15px;
            overflow-y: auto;
            background-color: #f9f9f9;
            border-bottom: 1px solid #eee;
            /* Use: Styles the main message display area of the chat window (scrollable). */
        }

        /* --- Chat Message Styling --- */
        .chat-body p {
            max-width: 80%; /* Limit message bubble width */
            padding: 8px 12px;
            border-radius: 15px; /* Rounded corners for bubbles */
            margin-bottom: 10px; /* Space between messages */
            line-height: 1.4;
            word-wrap: break-word; /* Ensure long words break */
        }

        .user-message {
            background-color: var(--primary-color); /* User messages blue */
            color: white;
            align-self: flex-end; /* Align to the right */
            margin-left: auto; /* Push to the right */
            border-bottom-right-radius: 2px; /* Sharpen bottom-right corner */
        }

        .bot-message {
            background-color: #e0e0e0; /* Bot messages light grey */
            color: var(--text-dark);
            align-self: flex-start; /* Align to the left */
            margin-right: auto; /* Push to the left */
            border-bottom-left-radius: 2px; /* Sharpen bottom-left corner */
        }
        /* --- End Chat Message Styling --- */


        .chat-footer {
            padding: 15px;
            display: flex;
            gap: 10px;
            border-top: 1px solid #eee;
            background-color: #f0f0f0;
            /* Use: Styles the input area at the bottom of the chat window. */
        }

        .chat-footer input[type="text"] {
            flex-grow: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 0.95em;
            /* Use: Styles the text input field in the chat footer. */
        }

        .chat-footer button {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s ease;
            /* Use: Darkens the "Send" button on hover. */
        }

        .chat-footer button:hover {
            background-color: #b27e0f;
            /* Use: Darkens the "Send" button on hover. */
        }

        /* Responsive adjustments for chat */
        @media (max-width: 600px) {
            #aiAssistantButton {
                width: 50px;
                height: 50px;
                font-size: 1.5em;
                bottom: 20px;
                right: 20px;
            }
            /* Use: Adjusts AI button size and position for smaller screens. */
            #aiAssistantChat {
                width: calc(100% - 40px); /* Full width minus margin */
                height: calc(80vh - 100px); /* Adjust height */
                bottom: 80px;
                right: 20px;
            }
            /* Use: Adjusts chat window size and position for smaller screens. */
        }
    </style>
</head>
<body>
    <header class="navbar">
        <div class="navbar-container">
            <div class="logo">
                <img src="mylogo.png" alt="Prince Alex Logo" />
            </div>
            <!-- Hamburger Menu Icon -->
            <div class="menu-toggle" id="mobile-menu">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
            <nav class="nav-links" id="main-nav">
                <a href="index.html">Home</a>
                <a href="about-us.html">About Us</a>
                <a href="#contact-us">Contact</a>
                <a href="ticket-lookup.html">Print Ticket</a>
                <a href="admin.html">Admin Login</a>
                <a href="profile.html" id="myProfileLink" style="display:none;">My Profile</a>
                <a href="login-register.html" id="loginRegisterLink">Login / Register</a>
                <a href="#" id="logoutLink" style="display:none;">Logout</a>
            </nav>
        </div>
    </header>

    <section class="hero">
        <h1>Welcome to Prince Alex Digital Travel Services</h1>
        <h2>Travel with Comfort and Safety</h2>
        <p>Your journey, our priority. Book your bus tickets online with Prince Alex Travel Services for a seamless experience.</p>
    </section>

    <section class="booking">
        <div class="booking-container">
            <h2>Book Your Ticket</h2>
            <form class="booking-form" onsubmit="event.preventDefault(); searchResults();">
                <select id="from" required>
                    <option value="">From</option>
                    <option>Nairobi</option>
                    <option>Kisumu</option>
                    <option>Eldoret</option>
                    <option>Mombasa</option>
                    <option>Nakuru</option>
                    <option>Kericho</option>
                    <option>Kakamega</option>
                    <option>Kitale</option>
                    <option>Nyeri</option>
                    <option>Busia</option>
                </select>
                <select id="to" required>
                    <option value="">To</option>
                    <option>Nairobi</option>
                    <option>Kisumu</option>
                    <option>Eldoret</option>
                    <option>Mombasa</option>
                    <option>Nakuru</option>
                    <option>Kericho</option>
                    <option>Kakamega</option>
                    <option>Kitale</option>
                    <option>Nyeri</option>
                    <option>Busia</option>
                </select>
                <input type="date" id="travelDate" required />
                <button type="submit">Search</button>
            </form>
        </div>
    </section>

    <section class="results-section" id="results"></section>
    <section class="gallery">
        <div class="gallery-container">
            <h2>Our Travel Experience</h2>
            <div class="image-grid">
                <img src="Bus1.png" alt="Luxury Bus">
                <img src="Bus2.png" alt="VIP Interior">
                <img src="Bus3.png" alt="Clean and Air Conditioned">
            </div>
        </div>
    </section>

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section" id="contact-us">
                <h4>Contact Us</h4>
                <p>Email: senerwaalex@gmail.com</p>
                <p>Phone: +254 717 384 875</p>
                <p>Location: Nairobi, Kenya</p>
            </div>
            <div class="footer-section">
                <h4>Quick Links</h4>
                <a href="index.html">Home</a>
                <a href="about-us.html">About Us</a>
                <a href="ticket-lookup.html">Print Ticket</a>
                <a href="admin.html">Admin Login</a>
            </div>
            <div class="footer-section">
                <h4>Follow Us</h4>
                <a href="#">Facebook</a>
                <a href="#">Instagram</a>
                <a href="#">Twitter</a>
            </div>
        </div>
        <div class="footer-bottom">
            &copy; 2025 Prince Alex Digital. All rights reserved.
        </div>
    </footer>

    <div id="loginChoiceModal">
        <div>
            <h3>How would you like to proceed?</h3>
            <p>To book your seat, you can log in/sign up or continue as a guest.</p>
            <div style="margin-top: 25px;">
                <button onclick="redirectToLogin()">Login / Sign Up</button>
                <button onclick="proceedAsGuest()">Proceed as Guest</button>
            </div>
        </div>
    </div>

    <div id="seatModal">
        <div>
            <h3 style="margin-bottom:15px;">Select Your Seat for <span id="busDetails"></span></h3>
            <div style="font-size: 0.9em; margin-bottom: 15px; text-align: center;">
                <p>Selected Seats: <span id="selectedSeatsDisplay">None</span></p>
            </div>
            <div id="seatGrid"></div>
            <div style="margin-bottom:10px;">
                <input type="text" id="passengerName" placeholder="Your Full Name" required />
                <input type="text" id="passengerID" placeholder="ID Number" required />
                <select id="passengerGender" required>
                    <option value="">Select Gender</option>
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                    <option value="Other">Other</option>
                </select>
                <input type="tel" id="passengerPhone" placeholder="Phone Number" required />
                <input type="email" id="passengerEmail" placeholder="Email Address" required />
            </div>
            <button onclick="confirmBooking()">Proceed to Pay</button>
            <button onclick="closeModal()">Cancel</button>
        </div>
    </div>

    <div id="aiAssistantButton">
        <i class="fas fa-comments"></i>
    </div>

    <div id="aiAssistantChat" class="chat-hidden">
        <div class="chat-header">
            <h3>AI Assistant</h3>
            <button class="chat-close-btn" onclick="toggleChat()">&times;</button>
        </div>
        <div class="chat-body" id="chatBody">
            <p class="bot-message">Hello! How can I assist you with your travel plans today?</p>
        </div>
        <div class="chat-footer">
            <input type="text" placeholder="Type your message..." id="chatInput" />
            <button id="sendChatBtn">Send</button>
        </div>
    </div>

    <script>
        // Set min date for travelDate input to today
        const today = new Date().toISOString().split("T")[0];
        document.getElementById("travelDate").setAttribute("min", today);

        let currentBusId = null;
        let currentBusRoute = null;
        let currentBusTime = null;
        let currentTravelDate = null;
        let currentBusPrice = null;
        let currentTotalSeats = null; // Added to store total seats for the current bus
        let selectedSeats = []; // New array to hold multiple selected seats

        // Supabase Initialization
        const SUPABASE_URL = 'https://numnzxrnrlxvkjwlusbe.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im51bW56eHJucmx4dmtqd2x1c2JlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTEyMTgxNzgsImV4cCI6MjA2Njc5NDEzOH0.03mPw9Y7tuWne5SNpsag7lYhQSZ6HqA8YmDSxVMVMFg';
        const supabase = Supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        // Global variables for navbar links
        let currentUser = null; // Will be set on DOMContentLoaded
        const myProfileLink = document.getElementById('myProfileLink');
        const loginRegisterLink = document.getElementById('loginRegisterLink');
        const logoutLink = document.getElementById('logoutLink');
        const mobileMenuToggle = document.getElementById('mobile-menu');
        const mainNav = document.getElementById('main-nav');


        document.addEventListener('DOMContentLoaded', () => {
            // Ensure modals are hidden on load
            document.getElementById("seatModal").style.display = "none";
            document.getElementById("loginChoiceModal").style.display = "none"; 
            
            document.getElementById('aiAssistantButton').addEventListener('click', toggleChat);
            const aiAssistantChat = document.getElementById('aiAssistantChat');
            aiAssistantChat.classList.add('chat-hidden'); // Ensure it starts hidden

            // Get references to chat elements
            const chatInput = document.getElementById('chatInput');
            const sendChatBtn = document.getElementById('sendChatBtn');

            // Attach event listeners for chat input
            sendChatBtn.addEventListener('click', handleChatInput);
            chatInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    handleChatInput();
                }
            });

            // IMPORTANT: Call updateAuthLinks() when the DOM is loaded
            currentUser = JSON.parse(localStorage.getItem('currentUser')); // Load current user
            updateAuthLinks(); // Update navbar based on login status

            // Attach logout handler to the logout link in navbar
            logoutLink.addEventListener('click', async (e) => {
                e.preventDefault(); // Prevent default link behavior
                await logout(); // Use await for async logout
            });

            // Toggle mobile menu
            mobileMenuToggle.addEventListener('click', () => {
                mobileMenuToggle.classList.toggle('open');
                // The main change: directly toggle the 'open' class on the nav-links element
                mainNav.classList.toggle('open'); 
            });

            // Close mobile menu when a link is clicked
            mainNav.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => {
                    mobileMenuToggle.classList.remove('open');
                    // Remove the 'open' class from the nav-links element
                    mainNav.classList.remove('open'); 
                });
            });
        });

        // Global function to update navbar links based on auth state
        function updateAuthLinks() {
            // Re-fetch current user just in case it was updated by another tab (though unlikely in this local storage setup)
            const currentLoggedInUser = JSON.parse(localStorage.getItem('currentUser'));

            if (currentLoggedInUser) {
                loginRegisterLink.style.display = 'none';
                myProfileLink.style.display = 'block'; // Show My Profile
                logoutLink.style.display = 'block';
            } else {
                loginRegisterLink.style.display = 'block';
                myProfileLink.style.display = 'none'; // Hide My Profile
                logoutLink.style.display = 'none';
            }
        }

        // Global logout function (now includes Supabase signOut)
        async function logout() {
            const { error } = await supabase.auth.signOut();
            if (error) {
                console.error('Error logging out:', error.message);
                alert('Error logging out: ' + error.message);
                return; // Exit if there's an error
            }
            localStorage.removeItem('currentUser'); // Clear the session
            alert('Logged out successfully!');
            // Update links immediately without full page reload
            updateAuthLinks();
            // Redirect to home page or login page after logout
            window.location.href = 'index.html'; // Or 'login-register.html'
        }


        // --- Front-end Booking System Functions ---

        async function searchResults() {
            const from = document.getElementById('from').value;
            const to = document.getElementById('to').value;
            const date = document.getElementById('travelDate').value;
            const resultsContainer = document.getElementById('results');
            resultsContainer.innerHTML = '<h2>Search Results</h2>';
            resultsContainer.classList.add('active'); // Show results section

            if (from === to) {
                resultsContainer.innerHTML += '<p style="color: red; text-align: center;">Please choose different origin and destination.</p>';
                return;
            }

            // Fetch matching buses from Supabase
            const { data: buses, error } = await supabase
                .from('buses')
                .select('*')
                .eq('origin', from)
                .eq('destination', to)
                .eq('travelDate', date);

            if (error) {
                console.error('Error fetching buses:', error.message);
                resultsContainer.innerHTML += `<p style="color: red; text-align: center;">Error fetching buses: ${error.message}</p>`;
                return;
            }

            if (buses.length === 0) {
                resultsContainer.innerHTML += `<p style="text-align: center;">No available buses for the route from <strong>${from}</strong> to <strong>${to}</strong> on <strong>${date}</strong>.</p>`;
                return;
            }

            buses.forEach(item => {
                const busImage = item.image || 'https://placehold.co/150x100/002d6b/ffffff?text=Bus'; // Use a placeholder image if not available
                resultsContainer.innerHTML += `
                    <div class="result-card">
                        <img src="${busImage}" alt="${item.origin} to ${item.destination}" />
                        <div class="result-details">
                            <h4>${item.origin} to ${item.destination}</h4>
                            <p>Departure: ${item.time}</p>
                            <p>Price: <strong>Ksh ${item.price}</strong></p>
                            <p>Total Seats: ${item.totalSeats}</p>
                            <p>Travel Date: ${item.travelDate}</p>
                        </div>
                        <button class="book-btn"
                                data-bus-id="${item.id}"
                                data-bus-route="${item.origin} to ${item.destination}"
                                data-bus-time="${item.time}"
                                data-travel-date="${item.travelDate}"
                                data-bus-price="${item.price}"
                                data-total-seats="${item.totalSeats}"
                                >Book Now</button>
                    </div>
                `;
            });

            attachBookNowListeners();
        }


        function attachBookNowListeners() {
            document.querySelectorAll('.book-btn').forEach(button => {
                button.removeEventListener('click', handleBookNowClick); // Prevent multiple listeners
                button.addEventListener('click', handleBookNowClick);
            });
        }

        // MODIFIED: handleBookNowClick function
        function handleBookNowClick(event) {
            // Store selected bus details temporarily
            currentBusId = event.target.dataset.busId;
            currentBusRoute = event.target.dataset.busRoute;
            currentBusTime = event.target.dataset.busTime;
            currentTravelDate = event.target.dataset.travelDate;
            currentBusPrice = event.target.dataset.busPrice;
            currentTotalSeats = parseInt(event.target.dataset.totalSeats); // Get total seats

            // Check if user is logged in (based on local storage, assuming Supabase auth handles actual session)
            if (currentUser) {
                // If logged in, directly show the seat selection modal and pre-fill details
                document.getElementById("busDetails").textContent = `${currentBusRoute} at ${currentBusTime} on ${currentTravelDate}`;
                generateSeats(currentTotalSeats); // Pass total seats to generateSeats
                
                // Pre-fill passenger details from currentUser
                document.getElementById("passengerName").value = currentUser.fullName || '';
                document.getElementById("passengerID").value = currentUser.nationalId || '';
                document.getElementById("passengerPhone").value = currentUser.phone || '';
                document.getElementById("passengerEmail").value = currentUser.email || '';

                document.getElementById("seatModal").style.display = "flex";

            } else {
                // If not logged in, show the login choice modal
                showLoginChoiceModal();
            }
        }

        // New function: Show the login/guest choice modal
        function showLoginChoiceModal() {
            document.getElementById("loginChoiceModal").style.display = "flex";
        }

        // New function: Handle "Proceed as Guest"
        async function proceedAsGuest() {
            closeLoginChoiceModal(); // Close the choice modal
            // Now, open the seat selection modal as before
            document.getElementById("busDetails").textContent = `${currentBusRoute} at ${currentBusTime} on ${currentTravelDate}`;
            await generateSeats(currentTotalSeats); // Pass total seats to generateSeats
            // Clear passenger details for guest
            document.getElementById("passengerName").value = '';
            document.getElementById("passengerID").value = '';
            document.getElementById("passengerGender").value = '';
            document.getElementById("passengerPhone").value = '';
            document.getElementById("passengerEmail").value = '';
            document.getElementById("seatModal").style.display = "flex";
        }

        // New function: Handle "Login / Sign Up"
        function redirectToLogin() {
            closeLoginChoiceModal(); // Close the choice modal
            alert("Please log in or sign up. You will need to search for your bus again after logging in.");
            window.location.href = 'login-register.html'; // Redirect to login page
        }

        function closeLoginChoiceModal() {
            document.getElementById("loginChoiceModal").style.display = "none";
        }

        function closeModal() {
            document.getElementById("seatModal").style.display = "none";
            // Clear passenger details for next time (important for logged-in user who might cancel)
            document.getElementById("passengerName").value = '';
            document.getElementById("passengerID").value = '';
            document.getElementById("passengerGender").value = '';
            document.getElementById("passengerPhone").value = '';
            document.getElementById("passengerEmail").value = '';

            selectedSeats = []; // Clear selected seats
            updateSelectedSeatsDisplay(); // Update display
            const selected = document.querySelectorAll(".seat-container.selected");
            selected.forEach(s => s.classList.remove("selected"));
        }

        async function generateSeats(totalSeats) {
            const seatGrid = document.getElementById("seatGrid");
            seatGrid.innerHTML = "";
            selectedSeats = [];
            updateSelectedSeatsDisplay();

            // Determine grid layout based on totalSeats
            if (totalSeats === 32) {
                seatGrid.style.gridTemplateColumns = "repeat(2, 1fr) 0.5fr repeat(2, 1fr)";
                seatGrid.style.gap = "10px 5px"; // Row gap, Column gap
            } else if (totalSeats === 14) {
                seatGrid.style.gridTemplateColumns = "repeat(2, 1fr)";
                seatGrid.style.gap = "10px";
            } else {
                seatGrid.style.gridTemplateColumns = "repeat(4, 1fr)";
                seatGrid.style.gap = "12px";
            }

            // Fetch existing bookings for this bus and date from Supabase
            const { data: bookings, error } = await supabase
                .from('bookings')
                .select('seat_number') // Changed to seat_number to match Supabase schema
                .eq('bus_id', currentBusId) // Changed to bus_id
                .eq('travel_date', currentTravelDate) // Changed to travel_date
                .neq('status', 'cancelled'); // Exclude cancelled bookings

            if (error) {
                console.error('Error fetching booked seats:', error.message);
                // Handle error, maybe show a message to the user
                return;
            }

            const bookedSeatsForThisTrip = bookings.map(booking => booking.seat_number); // Changed to seat_number

            // Populate seats for all layouts
            for (let i = 1; i <= totalSeats; i++) {
                const seatContainer = document.createElement("div");
                seatContainer.classList.add("seat-container");
                seatContainer.setAttribute("data-seat", i);

                const seatIcon = document.createElement("i");
                seatIcon.classList.add("fas", "fa-chair", "seat-icon");

                const seatNumber = document.createElement("span");
                seatNumber.classList.add("seat-number");
                seatNumber.textContent = `S${i}`;

                seatContainer.appendChild(seatIcon);
                seatContainer.appendChild(seatNumber);

                if (bookedSeatsForThisTrip.includes(i)) {
                    seatContainer.classList.add("booked");
                    seatContainer.onclick = null; // Make booked seats non-clickable
                } else {
                    seatContainer.onclick = function () {
                        const seatNum = parseInt(this.dataset.seat);
                        if (this.classList.contains("selected")) {
                            this.classList.remove("selected");
                            selectedSeats = selectedSeats.filter(s => s !== seatNum);
                        } else {
                            this.classList.add("selected");
                            selectedSeats.push(seatNum);
                        }
                        updateSelectedSeatsDisplay();
                    };
                }
                seatGrid.appendChild(seatContainer);
            }

            // Optional: Real-time subscription to seat availability
            // This will auto-update seat availability if new bookings happen while the modal is open
            supabase
                .channel('public:bookings')
                .on('postgres_changes', { event: '*', schema: 'public', table: 'bookings' }, payload => {
                    if (payload.eventType === 'INSERT' || payload.eventType === 'UPDATE' || payload.eventType === 'DELETE') {
                        // If the change is relevant to the current bus and date, re-generate seats
                        if (payload.new?.bus_id === currentBusId && payload.new?.travel_date === currentTravelDate || // Changed to bus_id and travel_date
                            payload.old?.bus_id === currentBusId && payload.old?.travel_date === currentTravelDate) { // Changed to bus_id and travel_date
                            console.log('Real-time update received, regenerating seats:', payload);
                            generateSeats(totalSeats); // Re-fetch and re-render seats
                        }
                    }
                })
                .subscribe();
        }


        function updateSelectedSeatsDisplay() {
            const displayElement = document.getElementById('selectedSeatsDisplay');
            if (selectedSeats.length > 0) {
                displayElement.textContent = selectedSeats.sort((a, b) => a - b).join(', ');
            } else {
                displayElement.textContent = 'None';
            }
        }


        async function confirmBooking() {
            const name = document.getElementById("passengerName").value;
            const idNumber = document.getElementById("passengerID").value;
            const gender = document.getElementById("passengerGender").value; // Corrected ID
            const phone = document.getElementById("passengerPhone").value;
            const email = document.getElementById("passengerEmail").value;
            
            if (!name || !idNumber || !gender || !phone || !email || selectedSeats.length === 0) {
                alert("Please fill all required passenger details and select at least one seat.");
                return;
            }

            const bookingsToInsert = [];
            let lastBookingRef = null;

            for (const seatNumber of selectedSeats) {
                const bookingRef = 'PA-' + Date.now().toString() + '-' + seatNumber; // Unique Booking Reference
                const newBooking = {
                    booking_ref: bookingRef, // Use a consistent column name for Supabase
                    passenger_name: name,
                    passenger_id: idNumber,
                    passenger_gender: gender,
                    passenger_phone: phone,
                    passenger_email: email,
                    bus_id: currentBusId,
                    bus_route: currentBusRoute,
                    bus_time: currentBusTime,
                    travel_date: currentTravelDate,
                    seat_number: seatNumber,
                    price: currentBusPrice, // Price per seat
                    status: 'pending',
                    booking_date: new Date().toISOString().split('T')[0],
                    user_id: currentUser ? currentUser.id : null // Store Supabase user ID if logged in
                };
                bookingsToInsert.push(newBooking);
                lastBookingRef = bookingRef; // Keep track of the last one for redirect
            }
            
            // Insert new records into the bookings table
            const { data, error } = await supabase
                .from('bookings')
                .insert(bookingsToInsert)
                .select(); // Select the inserted data to confirm

            if (error) {
                console.error('Error inserting booking:', error.message);
                alert('Error confirming booking: ' + error.message);
                return;
            }

            // If successful, store the last booking reference and redirect
            localStorage.setItem('lastBookingRef', lastBookingRef); // Store the ID of the last booking in the batch

            alert(`Booking confirmed for seat(s): ${selectedSeats.sort((a, b) => a - b).join(', ')}! Redirecting to payment page.`);
            closeModal();
            window.location.href = 'booking-success.html';
        }

        function toggleChat() {
            const chatContainer = document.getElementById('aiAssistantChat');
            // Check for 'chat-hidden' class to determine current state
            const isHidden = chatContainer.classList.contains('chat-hidden'); 

            if (isHidden) {
                // If currently hidden, remove 'chat-hidden' to make it display:flex
                chatContainer.classList.remove('chat-hidden'); 
                // A small timeout is often needed to allow the browser to register the display change
                // before applying the transition properties.
                setTimeout(() => {
                    chatContainer.classList.add('chat-visible'); // Add 'chat-visible' to trigger opacity/transform transition
                }, 10); 
            } else {
                // If currently visible, remove 'chat-visible' to start the reverse transition
                chatContainer.classList.remove('chat-visible'); 
                // After the transition completes (300ms, matching CSS), add 'chat-hidden' to set display:none
                setTimeout(() => {
                    chatContainer.classList.add('chat-hidden'); 
                }, 300); // This timeout should match the CSS transition duration for a smooth close
            }
        }

        // New functions for chat
        function appendMessage(message, sender) {
            const chatBody = document.getElementById('chatBody');
            const messageElement = document.createElement('p');
            messageElement.classList.add(sender + '-message'); // For potential future styling
            messageElement.textContent = message;
            chatBody.appendChild(messageElement);
            chatBody.scrollTop = chatBody.scrollHeight; // Scroll to bottom
        }

        function handleChatInput() {
            const chatInput = document.getElementById('chatInput');
            const message = chatInput.value.trim();
            if (message) {
                appendMessage(message, 'user');
                chatInput.value = '';
                // Simulate bot response
                setTimeout(() => {
                    appendMessage("Thank you for your message. Our AI assistant feature is under development. Please contact us directly at senerwaalex@gmail.com for immediate assistance.", 'bot');
                }, 1000);
            }
        }
    </script>
</body>
</html>
